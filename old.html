<html charset="utf-8">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="assets/js/jquery.min.js" charset="UTF-8"></script>
<script src="assets/js/ui/jquery.ui.core.js" charset="UTF-8"></script>
<script src="assets/js/ui/jquery.ui.datepicker.js" charset="UTF-8"></script>
<script src="assets/js/ui/i18n/jquery.ui.datepicker-fr.js" charset="UTF-8"></script>
<script src="assets/js/Chart.js"></script>
<link href="assets/css/ui-lightness/jquery-ui.css" rel="stylesheet">
<link href="assets/css/bootstrap.css" rel="stylesheet">
<script>
</script>
<script>
$(document).ready(function () {
	$( "#datepicker" ).datepicker({
      showOn: "button",
      buttonImage: "assets/img/calendar.gif",
      buttonImageOnly: true
    });

	$("#company").change(function () {
		var valeur = $("#company").val();

		 switch (valeur) {
			 case 'AAPL':
			 	$("#name").text("Apple");
			 	break;
			 case 'AMZN':
				$("#name").text("Amazon");
			 	break;
		 }

	});
	
	$.ajax({
		url: "api/quotes.php?symbol=AAPL&from=01/01/01&to=02/02/04",
		context: document.body,
		dataType: "json",
		success: function(response) {
		console.log(response);
			points = [];
			date = [];
			for (var i = 0; i < response['data'].length; i++) {
				points.push(response['data'][i].close);
				date.push(response['data'][i].date);
			}
		
			var data = {
				labels : date,
				datasets : [
					{
						fillColor : "rgba(220,220,220,0.5)",
						strokeColor : "rgba(220,220,220,1)",
						pointColor : "rgba(220,220,220,1)",
						pointStrokeColor : "#fff",
						data : points
					}
				]
			}

			//Get the context of the canvas element we want to select
			var ctx = $("#myChart").get(0).getContext("2d");
			var myNewChart = new Chart(ctx).Line(data);
			var ctx2 = $("#myChart2").get(0).getContext("2d");
			var myNewChart2 = new Chart(ctx2).Bar(data);
		},
		error: function (data) {
			console.log ("error");
			console.log(data);
		}	
	});
});
</script>
</head>
<body>
<div>
	<div class=container>
		<div class=row>
			<div class=span12>
				Company: 
				<select id=company>
					<option>AMZN</option>
					<option>AAPL</option>
				</select> 
			</div>
		</div>
		<div class=row>
			<div class=span6>
				Name: <span id=name>Amazon</span>
			</div>
			<div class=span6>
				Symbol: <span id=symbol>AMZN</span>
			</div>
		</div>
		<div class=row>
			<div class=span6>
				Sector: <span id=sector>Consumer Discretionary</span>
			</div>
			<div class=span6>
				Place: <span id=place>NASDAQ</span>
			</div>
		</div>
		<div class=row>
			<div class=span12>
				Date: <input id=datepicker type=text/>
			</div>
		</div>
		<div class=row>
			<div class=span12>
				<canvas id="myChart" width="400" height="400"></canvas>
				<canvas id="myChart2" width="400" height="400"></canvas>
			</div>
		</div>
	</div>
</div>
</body>
</html>
